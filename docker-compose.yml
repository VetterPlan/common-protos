version: '3.8'

services:
  # Servicio para construir la imagen de protos
  protos:
    build:
      context: .
      dockerfile: Dockerfile
    image: common-protos:latest
    container_name: protos-builder
    # Opcional: montar un volumen para exportar los archivos generados
    volumes:
      - ./output:/output
    command: sh -c "cp -r /protos/* /output/ 2>/dev/null || true && echo 'âœ… Protos generados y copiados a ./output' && ls -la /output"

